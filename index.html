<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>💧 Water Mission - Charity: Water Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <div class="game-wrapper">
            <!-- Header -->
            <div class="header">
                <h1>💧 Water Mission</h1>
                <p>Help charity: water deliver clean water to communities in need!</p>
            </div>

            <!-- Game Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">🏆</div>
                    <div class="stat-label">Score</div>
                    <div class="stat-value" id="score">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🛢️</div>
                    <div class="stat-label">Jerry Cans</div>
                    <div class="stat-value jerry-cans" id="jerryCanCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">👥</div>
                    <div class="stat-label">People Served</div>
                    <div class="stat-value people-served" id="peopleServed">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🚛</div>
                    <div class="stat-label">Trail Length</div>
                    <div class="stat-value" id="trailLength">1</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🥇</div>
                    <div class="stat-label">High Score</div>
                    <div class="stat-value" id="highScore">0</div>
                </div>
            </div>

            <!-- Milestone Badge -->
            <div class="milestone-container" id="milestoneContainer" style="display: none;">
                <div class="milestone-badge" id="milestoneBadge"></div>
            </div>

            <!-- Feedback Message -->
            <div class="feedback-container" id="feedbackContainer" style="display: none;">
                <div class="feedback-message" id="feedbackMessage"></div>
            </div>

            <!-- Game Canvas -->
            <div class="game-canvas-container">
                <div class="game-canvas" id="gameCanvas">
                        <canvas id="gameCanvas" width="600" height="400"></canvas>
                    </div>
            </div>

            <!-- Controls -->
            <div class="controls-section">
                <!-- Start Screen -->
                <div class="start-screen" id="startScreen">
                    <div class="mode-select">
                        <button class="mode-button selected" data-mode="easy" id="modeEasy" title="Easy: fewer pollutants, small penalty">Easy</button>
                        <button class="mode-button" data-mode="medium" id="modeMedium" title="Medium: more pollutants, larger penalty">Medium</button>
                        <button class="mode-button" data-mode="hard" id="modeHard" title="Hard: medium rules + faster truck">Hard</button>
                    </div>
                        <div class="sound-controls">
                            <label><input type="checkbox" id="soundToggle" checked> Sound</label>
                            <label>Volume <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="0.06"></label>
                        </div>
                        <div class="tuning-controls">
                            <label>Pollutant Penalty (easy / medium/hard default) <input type="range" id="penaltySlider" min="1" max="20" value="12"></label>
                            <label>Pollution Spawn Bias <input type="range" id="spawnSlider" min="0" max="100" value="70"></label>
                        </div>
                    <button class="start-button" id="startButton">🚛 Start Water Mission</button>
                    <p class="instructions">Use arrow keys to control your truck. Collect 💧 water drops, avoid ☠️ pollution!</p>
                </div>

                    <!-- Tutorial Modal -->
                    <div class="tutorial-modal" id="tutorialModal" style="display:none;">
                        <div class="tutorial-content">
                            <h3>Quick Tutorial</h3>
                            <p>You're a water delivery truck. Use the arrow keys to collect water drops (💧). Each drop adds a yellow jerry can to your trail and earns points.</p>
                            <p>Avoid pollutants (☠️). Hitting pollution lowers your score and increases the pollutant counter.</p>
                            <p>Pick a difficulty mode at the start: Easy for relaxing play, Medium for more challenge, Hard for fast-paced skill play.</p>
                            <button id="closeTutorial">Got it</button>
                        </div>
                    </div>

                <!-- Game Over Screen -->
                <div class="game-over-screen" id="gameOverScreen" style="display: none;">
                    <div class="results-box">
                        <h3>Mission Results</h3>
                        <p>You collected <strong id="finalJerryCans">0</strong> jerry cans</p>
                        <p>Providing clean water to <strong id="finalPeopleServed">0</strong> people!</p>
                    </div>
                    <div class="share-controls">
                        <button class="share-button" id="shareButton">📣 Share your score</button>
                        <button class="restart-button" id="restartButton">🔄 Try Another Mission</button>
                    </div>
                </div>

                <!-- Share Modal -->
                <div class="share-modal" id="shareModal" style="display:none;">
                    <div class="share-content">
                        <h3>Share your mission!</h3>
                        <p id="shareText">I just scored <strong id="shareScore">0</strong> points in Water Mission to support charity: water — help bring clean water! 👉 https://www.charitywater.org</p>
                        <div class="share-actions">
                            <button id="copyShare">Copy Message</button>
                            <button id="openLink">Open charity: water</button>
                            <button id="closeShare">Close</button>
                        </div>
                    </div>
                </div>

                <!-- Playing Instructions -->
                <div class="playing-instructions" id="playingInstructions" style="display: none;">
                    <p>Use ⬅️ ➡️ ⬆️ ⬇️ arrow keys to navigate your truck</p>
                    <p>Collect 💧 water drops to add jerry cans to your trail</p>
                </div>
            </div>

            <!-- About Section -->
            <div class="about-section">
                <h4>About charity: water</h4>
                <p>charity: water is a non-profit bringing clean and safe drinking water to people in developing countries. 
                Every jerry can you collect in this game represents real impact - helping families access clean water for drinking, cooking, and sanitation.</p>
            </div>
        </div>
    </div>

        <script src="game.js"></script>
</body>
</html>